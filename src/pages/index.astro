---
import { Icon } from "astro-icon/components";
import Divider from "../components/divider/Divider.astro";
import ProfileImage from "../components/profile-image/ProfileImage.astro";
import Tag from "../components/tag/Tag.astro";

import Link from "../components/link/Link.astro";
import Layout from "../layouts/Layout.astro";
import Education from "../section/Education.astro";
import Experience from "../section/Experience.astro";
import WhoIAm from "../section/WhoIAm.astro";
---
<script>
  const arrow = document.getElementById("scroll-arrow");
  const targetSection = document.querySelector("#experience"); // Adjust based on your section ID

  const observer = new IntersectionObserver(
    ([entry]) => {
      if (entry.isIntersecting) {
        console.log(arrow);
        arrow?.classList.add("opacity-0");
      } else {
        arrow?.classList.remove("opacity-0");
      }
    },
    { threshold: 0.1 }
  );

  if (targetSection) {
    observer.observe(targetSection);
  }
</script>

<Layout title="Hi! I'm Orion!">
  <!-- About Section -->
  <section
    class="flex flex-row flex-wrap md:flex-nowrap w-full items-center justify-center lg:justify-between gap-4 md:py-32"
  >
    <div
      class="flex flex-col items-center md:items-start gap-2 scroll-content opacity-0 translate-y-10 transition-all duration-500"
    >
      <h1 class="text-5xl py-12">Orion&apos;s Portfolio</h1>
      <p class="flex items-center">Ignore my cheesey one-liners, but I am</p>
      <p
        style={{
          fontWeight: "500",
          fontSize: "4rem",
          color: "var(--primary-color)",
          lineHeight: "normal",
        }}
        class="flex flex-wrap items-center text-center md:text-start"
      >
        A developer-turned designer.
      </p>
      <div
        class="roles flex flex-row gap-2 justify-center lg:justify-start py-12"
      >
        <Tag>Software Engineer</Tag>
        <Tag>UX Designer</Tag>
        <Tag>Photographer</Tag>
      </div>
    </div>
    <div>
      <ProfileImage alt="Orion's profile picture" width={350} />
    </div>
  </section>
  <Icon
    name="chevron-down"
    id="scroll-arrow"
    size={32}
    class="flex-shrink-0 inline animate-float-slow transition-opacity duration-500"
    aria-hidden
  />
  <Divider dividerType="primary" />
  <!-- Experience Section -->
  <Experience />
  <Divider dividerType="primary" />
  <!-- Education Section -->
  <Education />
  <Divider dividerType="primary" />
  <WhoIAm />
  <div class="flex gap-4 pt-12">
    <p style={{ color: "var(--primary-color)", fontSize: "2rem" }}>
      (Also, I designed and coded this website using <Link
        className="inline-flex"
        href="https://astro.build/"
        newTab
        underline>Astro.js! <Icon name="up-right-from-square" /></Link
      >)
    </p>
  </div>
</Layout>
